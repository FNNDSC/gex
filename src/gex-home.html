<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/polymer/lib/elements/dom-if.html">
<link rel="import" href="../bower_components/polymer/lib/mixins/gesture-event-listeners.html">

<link rel="import" href="../bower_components/app-layout/app-toolbar/app-toolbar.html">

<link rel="import" href="../bower_components/paper-icon-button/paper-icon-button.html">

<link rel="import" href="shared-styles.html">
<link rel="import" href="my-icons.html">

<dom-module id="gex-home">
  <template>
    <style include="shared-styles">
      :host {
        display: flex;
        flex: 1;
        /*padding: 10px;*/
      }

      .content {
        flex: 1;
        display: flex;
        flex-direction: column;
        background-color: #fff;
        margin-left: 10px;
        margin-right: 10px;
      }

      .panel {
        width: 256px;
        background-color: #fff;
      }

      .viewers {
        flex: 1;
        display:flex;
        flex-direction: column;
      }

      .viewers > div {
        flex:1;
      }

      .viewers > #bch {
        background-color: var(--bch-light-color);
      }

      .viewers > #ge {
        background-color: var(--ge-light-color);
      }

      .bch {
        background-color: #fff;
        border-left: 3px solid var(--bch-primary-color);
      }

      .ge {
        background-color: #fff;
        border-right: 3px solid var(--ge-primary-color);
      }

      #bch {
        border-top: 1px solid var(--bch-primary-color);
      }

      #ge {
        border-top: 1px solid var(--ge-primary-color);
      }
    </style>

    <div hidden$="[[!visibleBCH]]" class="panel bch">
      <app-toolbar>
        <div main-title>BCH PACS</div>
        <paper-icon-button icon="my-icons:search" on-tap="handleBCH"></paper-icon-button>
        <paper-icon-button icon="my-icons:close" on-tap="hideBCH"></paper-icon-button>
      </app-toolbar>
    </div>
    <div hidden$="[[visibleBCH]]" class="bch">
      <paper-icon-button icon="my-icons:chevron-right" on-tap="showBCH"></paper-icon-button>
    </div>

    <div class="content">
      <app-toolbar>
        <div main-title>Viewer actions</div>
      </app-toolbar>
      <div class="viewers">
        <div id="bch"></div>
        <div id="ge"></div>
      </div>
    </div>

    <div hidden$="[[!visibleGE]]" class="panel ge">
      <app-toolbar class="ge">
        <div main-title>GE S3</div>
        <paper-icon-button icon="my-icons:search" on-tap="handleGE"></paper-icon-button>
        <paper-icon-button icon="my-icons:close" on-tap="hideGE"></paper-icon-button>
      </app-toolbar>
    </div>
    <div hidden$="[[visibleGE]]" class="ge">
      <paper-icon-button icon="my-icons:chevron-left" on-tap="showGE"></paper-icon-button>
    </div>
  </template>

  <script>
    class GEXHome extends Polymer.GestureEventListeners(Polymer.Element) {
      static get is() { return 'gex-home'; }

      static get properties() {
        return {
          visibleGE: {
            type: Boolean,
            value: true,
          },
          visibleBCH: {
            type: Boolean,
            value: true,
          },
        };
      }

      handleBCH(event) {
        event.stopPropagation();
        event.preventDefault();
        const openDialog = new CustomEvent(
          'open-dialog',
          {
            detail: {
              open: true,
            },
            bubbles: true,
            composed: true,
          }
        );
        this.dispatchEvent(openDialog);
      }

      handleGE(event) {
        console.log('fetch GE data');
      }

      hideBCH() {
        this.visibleBCH = false;
      }

      hideGE() {
        this.visibleGE = false;
      }

      showBCH() {
        this.visibleBCH = true;
      }

      showGE() {
        this.visibleGE = true;
      }
    }

    window.customElements.define(GEXHome.is, GEXHome);
  </script>
</dom-module>
